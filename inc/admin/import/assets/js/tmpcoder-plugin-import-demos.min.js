var w=0;!function(e){"use strict";e(document).on("click",".import-demo-content",function(a){window.requiredPlugins=!1,window.requiredTheme=!1,window.requiredFiles=!1,window.reference=e(this),window.message_text=e(".message-text"),window.message_error_message=e(".display-error-message"),window.install_required_plugins=e(this).closest(".import-demo-box").find(".install-required-plugins").attr("data-file"),window.xml_file_url=e(this).closest(".import-demo-box").find(".xml-file-url").attr("data-file"),window.redux_file_url=e(this).closest(".import-demo-box").find(".redux-file-url").attr("data-file"),window.elementor_file_url=e(this).closest(".import-demo-box").find(".elementor-file-url").attr("data-file"),window.widget_file_url=e(this).closest(".import-demo-box").find(".widget-file-url").attr("data-file"),window.revslider_file_url=e(this).closest(".import-demo-box").find(".revslider-file-url").attr("data-file"),window.tmpcoder_cpt_data=e(this).closest(".import-demo-box").find(".tmpcoder-cpt-data").attr("data-file"),widget_file_url||e('[name="importlist[install_widgets]"').parent().parent().remove(),revslider_file_url||e('[name="importlist[install_revslider_data]"').parent().parent().remove(),window.revslider_file_url=e(this).closest(".import-demo-box").find(".revslider-file-url").attr("data-file"),window.theme_demo_slug=e(this).closest(".import-demo-box").find(".theme-demo-slug").attr("data-file"),window.theme_demo_name=e(this).closest(".plugin_box").find(".plugin_name").text(),window.set_demo_name=e(".demo-name").text('"'+theme_demo_name+'"'),window.theme_demo_url=e(this).closest(".plugin_box").find(".demo-preview-btn").attr("href");var n=confirm("For the best results, it is recommended to temporarily deactivate All other Active plugins Except Elementor and Sastra Addons for Elementor.\n\nElementor Header, Footer, Pages, Media Files, Menus and some required plugins will be installed on your website.");if(message_text.text(tmpcoder_ajax_object.start_import_message),a.preventDefault(),n){message_text.text(tmpcoder_ajax_object.start_import_message),t(),c(),o(),x();var i=setInterval(function(){Object.values(requiredPlugins).every(Boolean)&&requiredTheme&&requiredFiles&&(r(),clearInterval(i))},1e3)}});const t=function(){var t=tmpcoder_ajax_object.nonce;e.ajax({url:tmpcoder_ajax_object.ajax_url,method:"POST",data:{action:"tmpcoder_get_prebuilt_demos",demo_slug:theme_demo_slug,_ajax_nonce:t},beforeSend:function(){reference.text(reference.attr("data-loading")),e("#prepare-data-loader").removeClass("hide-import-img-loader"),e('[name="importlist[install_required_plugins]"').prop("checked",!0),e("#install-plugin-loader").addClass("hide-import-img-loader"),setTimeout(function(){message_text.text(tmpcoder_ajax_object.delete_previews_demo_message)},500);var t=f(1,2);p(t,0)}}).done(function(e){1==e.success?"success"==e.data.status&&(0!=e.data.length?(xml_file_url=e.data.data[0]["xml-file-url"],redux_file_url=e.data.data[0]["redux-file-url"],elementor_file_url=e.data.data[0]["elementor-file-url"],reference.closest(".import-demo-box").find(".xml-file-url").attr("data-file",xml_file_url),reference.closest(".import-demo-box").find(".elementor-file-url").attr("data-file",redux_file_url),reference.closest(".import-demo-box").find(".redux-file-url").attr("data-file",elementor_file_url),window.requiredFiles=!0):message_text.text(e.data.message)):"error"==e.data.status&&message_text.text(e.data.message)}).fail(function(e){console.log(e)})},o=function(){tmpcoder_ajax_object.nonce;h(),window.requiredPlugins=void 0!==install_required_plugins&&JSON.parse(install_required_plugins),requiredPlugins&&(!1===requiredPlugins["contact-form-7"]&&g("contact-form-7"),!1===requiredPlugins["redux-framework"]&&g("redux-framework"),!1===requiredPlugins.woocommerce&&g("woocommerce"),!1===requiredPlugins["advanced-custom-fields"]&&g("advanced-custom-fields"))},r=function(){_();var t=tmpcoder_ajax_object.nonce;e.ajax({url:tmpcoder_ajax_object.ajax_url,method:"POST",data:{action:"tmpcoder-plugin-reset-posts",_ajax_nonce:t},beforeSend:function(){reference.text(reference.attr("data-loading")),e("#prepare-data-loader").removeClass("hide-import-img-loader"),e('[name="importlist[install_required_plugins]"').prop("checked",!0),e("#install-plugin-loader").addClass("hide-import-img-loader"),setTimeout(function(){message_text.text(tmpcoder_ajax_object.delete_previews_demo_message)},500);var t=f(3,5);p(t,0)}}).done(function(t){if(1==t.success){var o=f(6,10);p(o,1),e('[name="importlist[preparing_data]"').prop("checked",!0),e("#prepare-data-loader").addClass("hide-import-img-loader"),a(xml_file_url,!1,tmpcoder_cpt_data)}}).fail(function(e){console.log(e)})},a=function(t,o=!1,r=""){var a=t,i=tmpcoder_ajax_object.nonce;e.ajax({url:tmpcoder_ajax_object.ajax_url,method:"POST",data:{wxr_url:a,action:"tmpcoder-plugin-import-prepare-xml",_ajax_nonce:i},beforeSend:function(){var t=f(11,30);p(t,2),e("#install-content-loader").removeClass("hide-import-img-loader"),message_text.text(tmpcoder_ajax_object.import_site_content_message)}}).done(function(t){if(1==t.success){if(t.data.url){var a=f(31,50);p(a,2),n(t.data.url+"&tmpcoder_cpt_data="+r,o)}}else t.data?(window.onbeforeunload=null,message_text.html(t.data+' <a href="">Close popup</a>'),message_text.addClass("notice notice-error"),e("#install-content-loader").remove(),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style")):(reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style"),message_text.text(tmpcoder_ajax_object.invalid_request_url_message))}).fail(function(t){console.log(t),window.onbeforeunload=null,message_text.html(' <a href="">Close popup</a>'),message_text.addClass("notice notice-error"),e("#install-content-loader").remove(),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style")})},n=function(t){var o=f(51,70);p(o,2),message_text.text(tmpcoder_ajax_object.import_site_content_message),message_error_message.removeAttr("style"),e(".progress-counter").removeAttr("style"),e(".progress").removeAttr("style");const r=new EventSource(t,{withCredentials:!0});r.onmessage=(o=>{const a=JSON.parse(o.data);switch(a.action){case"complete":if(!1===a.error){r.close(),e('[name="importlist[install_content]"').prop("checked",!0),e("#install-content-loader").addClass("hide-import-img-loader");var n=f(71,85);p(n,2),i(redux_file_url)}else{if(message_text.text(""),e(".progress-counter").css("display","none"),e(".progress").css("display","none"),message_error_message.text(tmpcoder_ajax_object.import_site_content_faild_message),message_error_message.css("color","red"),-1!=t.indexOf("&is_retry=true"))var s=t;else s=t+"&is_retry=true";e(".tmpcoder-retry-import").attr("data-xml-url",s),e(".error-message-text-button").css("display","flex")}}}),r.onerror=(o=>{if(r.close(),message_text.text(""),e(".progress-counter").css("display","none"),e(".progress").css("display","none"),message_error_message.text(tmpcoder_ajax_object.import_site_content_faild_message),message_error_message.css("color","red"),-1!=t.indexOf("&is_retry=true"))var a=t;else a=t+"&is_retry=true";e(".tmpcoder-retry-import").attr("data-xml-url",a),e(".error-message-text-button").css("display","flex")}),r.addEventListener("log",function(e){const t=JSON.parse(e.data);let o=t.message||"";o&&"info"===t.level&&(o=o.replace(/"/g,function(){return""}))&&message_text.text(o)})},i=function(t){t=t;var o=tmpcoder_ajax_object.nonce;message_text.removeAttr("style"),message_error_message.removeAttr("style"),e(".progress-counter").removeAttr("style"),e(".progress").removeAttr("style"),e.ajax({url:tmpcoder_ajax_object.ajax_url,method:"POST",data:{redux_file_url:t,tmpcoder_current_active_demo:theme_demo_slug,action:"tmpcoder-plugin-import-redux-options",_ajax_nonce:o},beforeSend:function(){e("#site-setting-loader").removeClass("hide-import-img-loader"),message_text.text(tmpcoder_ajax_object.import_site_options_message)}}).done(function(t){if(1==t.success){e('[name="importlist[install_site_settings]"').prop("checked",!0),e("#site-setting-loader").addClass("hide-import-img-loader");var o=f(86,90);p(o,3),s(elementor_file_url)}else t.data?(window.onbeforeunload=null,message_text.html(t.data+' <a href="">Close popup</a>'),message_text.addClass("notice notice-error"),e("#install-content-loader").remove(),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style")):(message_text.text(tmpcoder_ajax_object.import_site_options_failed_message),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style"))}).fail(function(t){console.log(t),window.onbeforeunload=null,message_text.html(' <a href="">Close popup</a>'),message_text.addClass("notice notice-error"),e("#install-content-loader").remove(),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style")})},s=function(t){t=t;var o=tmpcoder_ajax_object.nonce;e.ajax({url:tmpcoder_ajax_object.ajax_url,method:"POST",data:{elementor_file_url:t,action:"tmpcoder-plugin-import-elementor-options",_ajax_nonce:o},beforeSend:function(){e("#elementor-setting-loader").removeClass("hide-import-img-loader"),message_text.text(tmpcoder_ajax_object.import_elementor_options_message)}}).done(function(t){if(1==t.success){e('[name="importlist[install_elementor_settings]"').prop("checked",!0),e("#elementor-setting-loader").addClass("hide-import-img-loader");var o=f(91,95);p(o,4),widget_file_url?d(function(){l(widget_file_url)}):m()}else t.data?(window.onbeforeunload=null,message_text.html(t.data+' <a href="">Close popup</a>'),message_text.addClass("notice notice-error"),e("#install-content-loader").remove(),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style")):(message_text.text(tmpcoder_ajax_object.import_elementor_failed_message),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style"))}).fail(function(t){console.log(t),window.onbeforeunload=null,message_text.html(' <a href="">Close popup</a>'),message_text.addClass("notice notice-error"),e("#install-content-loader").remove(),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style")})},d=function(t){var o=tmpcoder_ajax_object.nonce;e.ajax({url:tmpcoder_ajax_object.ajax_url,method:"POST",data:{action:"tmpcoder-plugin-reset-widgets-data",_ajax_nonce:o},beforeSend:function(){message_text.text(tmpcoder_ajax_object.reset_widgets_message),e("#install-widget-loader").removeClass("hide-import-img-loader")}}).done(function(o){1==o.success?(console.log("Reset widget data successfully"),t()):o.data?(window.onbeforeunload=null,message_text.html(o.data+' <a href="">Close popup</a>'),message_text.addClass("notice notice-error"),e("#install-content-loader").remove(),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style")):(message_text.text(tmpcoder_ajax_object.reset_widgets_failed_message),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style"),t())}).fail(function(e){console.log(e),t()})},l=function(t){t=t;var o=tmpcoder_ajax_object.nonce;e.ajax({url:tmpcoder_ajax_object.ajax_url,method:"POST",data:{widgets_file_url:t,action:"tmpcoder-plugin-import-widgets",_ajax_nonce:o},beforeSend:function(){e("#install-widget-loader").removeClass("hide-import-img-loader");var t=f(95,99);p(t,4),message_text.text(tmpcoder_ajax_object.importing_widgets_message)}}).done(function(t){1==t.success?(e('[name="importlist[install_widgets]"').prop("checked",!0),e("#install-widget-loader").addClass("hide-import-img-loader"),p(100,5),e(".import-demo-content").removeAttr("style"),message_text.text(tmpcoder_ajax_object.demo_import_success_message),m()):t.data?(window.onbeforeunload=null,message_text.html(t.data+' <a href="">Close popup</a>'),message_text.addClass("notice notice-error"),e("#install-content-loader").remove(),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style")):(message_text.text(t.data),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style"))}).fail(function(t){console.log(t),window.onbeforeunload=null,message_text.html(' <a href="">Close popup</a>'),message_text.addClass("notice notice-error"),e("#install-content-loader").remove(),reference.text(reference.attr("data-id")),e(".import-demo-content").removeAttr("style")})},m=function(){var t=tmpcoder_ajax_object.nonce;e.ajax({url:tmpcoder_ajax_object.ajax_url,method:"POST",data:{action:"tmpcoder-plugin-import-end",tmpcoder_current_active_demo:theme_demo_slug,tmpcoder_demo_url:theme_demo_url,_ajax_nonce:t},beforeSend:function(){p(100,5)}}).done(function(t){e("#import-process-complete-popup .popup-content .popup-message").html(tmpcoder_ajax_object.import_process_sucess_message),u(),p(0,0),window.onbeforeunload=null}).fail(function(e){console.log(e)})},c=function(){e("#import-demo-popup").fadeIn(),e(".tmpcoder-admin-popup-wrap").fadeIn()},p=function(t,o){e(".progress-counter").text(" "+o+"/5 completed"),e(".progress-bar").attr("aria-valuenow",t),e(".progress-bar").attr("style","width:"+t+"%"),e(".progress-bar").text(t+"%")};function u(){e("#import-demo-popup").remove(),e("#uninstall-demo-popup").remove(),e(".tmpcoder-admin-popup").css("display","inline-block"),e("#import-process-complete-popup").fadeIn()}function _(){window.onbeforeunload=function(e){return"Changes that you made may not be saved."}}e(document).on("click","#import-process-complete-popup .popup-close",function(){window.location.reload()}),e(document).on("click",".import-button",function(e){return e.preventDefault(),c(),!1}),e(document).on("click",".demo-success-button",function(t){return t.preventDefault(),e("#import-process-complete-popup .popup-content .popup-message").html(tmpcoder_ajax_object.import_process_sucess_message),u(),!1}),e(document).on("click",".popup-close",function(){e("#import-demo-uninstall-popup").fadeOut(),e("#uninstall-demo-popup").fadeOut(),e(".tmpcoder-admin-popup").fadeOut(),e(".tmpcoder-import-popup-wrap").fadeOut()});function f(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}e(document).on("click",".uninstall-button",function(t){t.preventDefault(),window.theme_demo_name=e(this).closest(".plugin_box").find(".plugin_name").text(),console.log(theme_demo_name),e(".uninstall-demo-name").html('"'+theme_demo_name+'"'),e("#import-demo-uninstall-popup").fadeIn(),e(".tmpcoder-import-popup-wrap").fadeIn(),e(".tmpcoder-admin-popup").fadeIn(),p(0,0)}),e(document).on("click",".uninstall-confirm-button",function(t){var o;t.preventDefault(),_(),e("#import-demo-uninstall-popup").remove(),e("#uninstall-demo-popup").fadeIn(),e(".tmpcoder-admin-popup").css("display","flex"),o=tmpcoder_ajax_object.nonce,e.ajax({url:tmpcoder_ajax_object.ajax_url,method:"POST",data:{action:"tmpcoder-plugin-reset-posts",_ajax_nonce:o},beforeSend:function(){var t=f(1,70);e("#uninstall-demo-popup").find(".progress-counter").text("0/1 completed"),e("#uninstall-demo-popup").find(".progress-bar").text(t+"%"),e("#uninstall-demo-popup").find(".progress-bar").attr("aria-valuenow",t),e("#uninstall-demo-popup").find(".progress-bar").attr("style","width:"+t+"%")}}).done(function(t){1==t.success&&(window.onbeforeunload=null,e("#uninstall-demo-popup").find(".progress-counter").text("1/1 completed"),e("#uninstall-demo-popup").find(".progress-bar").text("100%"),e("#uninstall-demo-popup").find(".progress-bar").attr("aria-valuenow","100"),e("#uninstall-demo-popup").find(".progress-bar").attr("style","width:100%"),e("#import-process-complete-popup .popup-content .popup-message").html(tmpcoder_ajax_object.uninstall_process_sucess_message),setTimeout(function(){u()},500))}).fail(function(e){console.log(e),window.onbeforeunload=null})}),e(document).on("click",".uninstall-success-button",function(t){return t.preventDefault(),e("#import-process-complete-popup .popup-content .popup-message").html(tmpcoder_ajax_object.uninstall_process_sucess_message),u(),!1}),e(window).on("scroll",function(){(e(".tmpcoder-elements-header").length>0?e(".tmpcoder-elements-header").position().top:0)>500?e(".tmpcoder-elements-header").addClass("tmpcoder-elements-header-fixed"):e(".tmpcoder-elements-header").removeClass("tmpcoder-elements-header-fixed")});const g=function(t){wp.updates.installPlugin({slug:t,success:function(){e.ajax({type:"POST",url:tmpcoder_ajax_object.ajax_url,data:{action:"tmpcoder_activate_required_plugins",plugin:t,nonce:tmpcoder_ajax_object.nonce},success:function(e){window.requiredPlugins[t]=!0},error:function(e){console.log(e),window.requiredPlugins[t]=!0}})},error:function(o,r,a){console.log(o.errorCode),"folder_exists"===o.errorCode&&e.ajax({type:"POST",url:tmpcoder_ajax_object.ajax_url,data:{action:"tmpcoder_activate_required_plugins",plugin:t,nonce:tmpcoder_ajax_object.nonce},success:function(e){window.requiredPlugins[t]=!0}})}})},x=function(){e.ajax({type:"POST",url:tmpcoder_ajax_object.ajax_url,data:{action:"tmpcoder_fix_plugin_compatibility",nonce:tmpcoder_ajax_object.nonce},success:function(e){console.log("Plugins deactivated successfully!")},error:function(e){console.log("No plugins deactivated!")}})},h=function(){var t=reference.data("theme-status");if("req-theme-active"!==t)return"req-theme-inactive"===t?(e.post(tmpcoder_ajax_object.ajax_url,{action:"tmpcoder_activate_required_theme",nonce:tmpcoder_ajax_object.nonce}),void(window.requiredTheme=!0)):void wp.updates.installTheme({slug:"sastrawp",success:function(){e.post(tmpcoder_ajax_object.ajax_url,{action:"tmpcoder_activate_required_theme",nonce:tmpcoder_ajax_object.nonce}),window.requiredTheme=!0}});window.requiredTheme=!0};var j=null,w=e(".tmpcoder-import-demo-grid").html();e(".tmpcoder-import-demo-search").find("input").keyup(function(t){if(13===t.which)return!1;var o=e(this).val().toLowerCase();null!=j&&clearTimeout(j),j=setTimeout(function(){j=null,v(o,w)},1e3)}),e(".tmpcoder-import-demo-price-filter ul li").on("click",function(){var t="premium"==(t=e(this).text()).toLowerCase()?"pro":t.toLowerCase();b(t),e(".tmpcoder-import-demo-price-filter").children().first().attr("data-price",t),e(".tmpcoder-import-demo-price-filter").children().first().text("Price: "+e(this).text())});const v=function(t,o){var r=e(".tmpcoder-import-demo-price-filter").children().first().attr("data-price"),a="mixed"===r?"":'[data-price*="'+r+'"]';""!==t?(e(".main-grid .grid-item").hide(),e('.main-grid .grid-item[data-title*="'+t+'"]'+a).show()):(e(".main-grid").html(o),e(".main-grid .grid-item"+a).show()),e(".main-grid .grid-item").is(":visible")?(e(".tmpcoder-import-demo-not-found").hide(),e(".tmpcoder-import-demo-page-title").show()):(e(".tmpcoder-import-demo-page-title").hide(),e(".tmpcoder-import-demo-not-found").css("display","flex")),e(".main-grid .grid-item:visible").each(function(o){if(""!==t){-1===e(this).attr("data-title").indexOf(t)&&e(".main-grid").append(e(this).remove())}})},b=function(t){var o=e(".tmpcoder-import-demo-search").find("input").val(),r=""===o?"":'[data-title*="'+o+'"]';"free"==t?(e(".main-grid .grid-item").hide(),e('.main-grid .grid-item[data-price*="'+t+'"]'+r).show()):"pro"==t?(e(".main-grid .grid-item").hide(),e('.main-grid .grid-item[data-price*="'+t+'"]'+r).show()):e(".main-grid .grid-item"+r).show()};e(document).on("click",".tmpcoder-retry-import",function(t){var o=e(this).attr("data-xml-url");n(o),e(this).parent().css("display","none")})}(jQuery);