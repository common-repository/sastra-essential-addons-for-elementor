jQuery(document).ready(function(t){"use strict";var e={getLiveSettings:TmpcoderMegaMenuSettingsData.settingsData,init:function(){e.initSettingsButtons()},initSettingsButtons:function(){t("#menu-to-edit .menu-item").each(function(){var m=t(this),i=e.getNavItemId(m),o=e.getNavItemDepth(m);m.append('<div class="tmpcoder-mm-settings-btn" data-id="'+i+'" data-depth="'+o+'"><span>S</span>Mega Menu</div>')}),t(".tmpcoder-mm-settings-btn").on("click",e.openSettingsPopup)},openSettingsPopup:function(){e.setSettings(t(this)),t(".tmpcoder-mm-settings-popup-wrap").fadeIn(),e.closeTemplateEditorPopup(),e.initMenuWidthToggle(),e.initMobileContentToggle(),e.initColorPickers(),e.initIconPicker(),e.closeSettingsPopup(),e.saveSettings(t(this)),e.initEditMenuButton(t(this)),t(".tmpcoder-mm-popup-title").find("span").text(t(this).closest("li").find(".menu-item-title").text())},closeSettingsPopup:function(){t(".tmpcoder-mm-settings-close-popup-btn").on("click",function(){t(".tmpcoder-mm-settings-popup-wrap").fadeOut()}),t(".tmpcoder-mm-settings-popup-wrap").on("click",function(e){e.target===e.currentTarget&&t(this).fadeOut()}),t(".tmpcoder-save-mega-menu-btn").off("click"),t(".tmpcoder-edit-mega-menu-btn").off("click")},initEditMenuButton:function(m){t(".tmpcoder-edit-mega-menu-btn").on("click",function(){var t=m.attr("data-id"),i=m.attr("data-depth");e.createOrEditMenuTemplate(t,i)})},createOrEditMenuTemplate:function(m,i){t.ajax({type:"POST",url:ajaxurl,data:{action:"tmpcoder_create_mega_menu_template",nonce:TmpcoderMegaMenuSettingsData.nonce,item_id:m,item_depth:i},success:function(t){console.log(t.data.edit_link),e.openTemplateEditorPopup(t.data.edit_link)}})},openTemplateEditorPopup:function(e){t(".tmpcoder-mm-editor-popup-wrap").fadeIn(),t(".tmpcoder-mm-editor-popup-iframe").find("iframe").length||t(".tmpcoder-mm-editor-popup-iframe").append('<iframe src="'+e+'" width="100%" height="100%"></iframe>')},closeTemplateEditorPopup:function(){t(".tmpcoder-mm-editor-close-popup-btn").on("click",function(){t(".tmpcoder-mm-editor-popup-wrap").fadeOut(),setTimeout(function(){t(".tmpcoder-mm-editor-popup-iframe").find("iframe").remove()},1e3)})},initColorPickers:function(){t(".tmpcoder-mm-setting-color").find("input").wpColorPicker(),t(".tmpcoder-mm-setting-color").length&&(t(".tmpcoder-mm-setting-color").find(".wp-color-result-text").text("Select Color"),t(".tmpcoder-mm-setting-color").find(".wp-picker-clear").val("Clear"))},initIconPicker:function(){t("#tmpcoder_mm_icon_picker").iconpicker(),t("#tmpcoder_mm_icon_picker").on("iconpickerSelected",function(e){t(".tmpcoder-mm-setting-icon div span").removeClass("tmpcoder-mm-active-icon"),t(".tmpcoder-mm-setting-icon div span:last-child").addClass("tmpcoder-mm-active-icon"),t(".tmpcoder-mm-setting-icon div span:last-child i").removeAttr("class"),t(".tmpcoder-mm-setting-icon div span:last-child i").addClass(e.iconpickerValue)}),t("#tmpcoder_mm_icon_picker").on("iconpickerHide",function(e){setTimeout(function(){"tmpcoder-mm-active-icon"==t(".tmpcoder-mm-setting-icon div span:first-child").attr("class")&&t("#tmpcoder_mm_icon_picker").val(""),t(".tmpcoder-mm-settings-wrap").removeAttr("style")},100)}),t(".tmpcoder-mm-setting-icon div span:first-child").on("click",function(){t(".tmpcoder-mm-setting-icon div span").removeClass("tmpcoder-mm-active-icon"),t(this).addClass("tmpcoder-mm-active-icon")}),t(".tmpcoder-mm-setting-icon div span:last-child").on("click",function(){t("#tmpcoder_mm_icon_picker").focus(),t(".tmpcoder-mm-settings-wrap").css("overflow","hidden")})},saveSettings:function(m){var i=t(".tmpcoder-save-mega-menu-btn");i.text("Save"),i.on("click",function(){var o=m.attr("data-id"),c=m.attr("data-depth"),n=e.getSettings();t.ajax({type:"POST",url:ajaxurl,data:{action:"tmpcoder_save_mega_menu_settings",nonce:TmpcoderMegaMenuSettingsData.nonce,item_id:o,item_depth:c,item_settings:JSON.stringify(n)},success:function(t){i.text("Saved"),i.append('<span class="dashicons dashicons-yes"></span>'),setTimeout(function(){i.find(".dashicons").remove(),i.text("Save"),i.blur()},1e3),e.getLiveSettings[o]=n}})})},getSettings:function(){var e={};return t(".tmpcoder-mm-setting").each(function(){var m=t(this),i=m.find('input[type="checkbox"]'),o=m.find("select"),c=m.find('input[type="number"]'),n=m.find('input[type="text"]');if(i.length){let t=i.attr("id");e[t]=i.prop("checked")?"true":"false"}if(o.length){let t=o.attr("id");e[t]=o.val()}if(c.length){let t=c.attr("id");e[t]=c.val()}if(n.length){let m=n.attr("id");if("tmpcoder_mm_icon_picker"!==m)e[m]=n.val();else{let i=t(".tmpcoder-mm-setting-icon div span.tmpcoder-mm-active-icon").find("i").attr("class");e[m]="fas fa-ban"!==i?i:""}}}),e},getNavItemId:function(t){return t.attr("id").replace("menu-item-","")},getNavItemDepth:function(t){var e=t.attr("class").match(/menu-item-depth-\d/);return e[0]?e[0].replace("menu-item-depth-",""):0},initMenuWidthToggle:function(){var e=t("#tmpcoder_mm_width"),m=t("#tmpcoder_mm_custom_width").closest(".tmpcoder-mm-setting");"custom"===e.val()?m.show():m.hide(),e.on("change",function(){"custom"===e.val()?m.show():m.hide()})},initMobileContentToggle:function(){var e=t("#tmpcoder_mm_mobile_content"),m=t("#tmpcoder_mm_render").closest(".tmpcoder-mm-setting");"mega"===e.val()?m.show():m.hide(),e.on("change",function(){"mega"===e.val()?m.show():m.hide()})},setSettings:function(m){var i=m.attr("data-id"),o=e.getLiveSettings[i];t.isEmptyObject(o)?(t("#tmpcoder_mm_enable").prop("checked",!1),t("#tmpcoder_mm_position").val("default").trigger("change"),t("#tmpcoder_mm_width").val("default").trigger("change"),t("#tmpcoder_mm_custom_width").val("600"),t("#tmpcoder_mm_render").val("default").trigger("change"),t("#tmpcoder_mm_mobile_content").val("mega").trigger("change"),""!==o.tmpcoder_mm_icon_picker&&(t(".tmpcoder-mm-setting-icon div span").removeClass("tmpcoder-mm-active-icon"),t(".tmpcoder-mm-setting-icon div span:first-child").addClass("tmpcoder-mm-active-icon"),t(".tmpcoder-mm-setting-icon div span:last-child i").removeAttr("class"),t(".tmpcoder-mm-setting-icon div span:last-child i").addClass("fas fa-angle-down")),t("#tmpcoder_mm_icon_color").val("").trigger("change"),t("#tmpcoder_mm_icon_size").val(""),t("#tmpcoder_mm_badge_text").val(""),t("#tmpcoder_mm_badge_color").val("#ffffff").trigger("keyup"),t("#tmpcoder_mm_badge_bg_color").val("#000000").trigger("keyup"),t("#tmpcoder_mm_badge_animation").prop("checked",!1)):("true"==o.tmpcoder_mm_enable?t("#tmpcoder_mm_enable").prop("checked",!0):t("#tmpcoder_mm_enable").prop("checked",!1),t("#tmpcoder_mm_position").val(o.tmpcoder_mm_position).trigger("change"),t("#tmpcoder_mm_width").val(o.tmpcoder_mm_width).trigger("change"),t("#tmpcoder_mm_custom_width").val(o.tmpcoder_mm_custom_width),t("#tmpcoder_mm_render").val(o.tmpcoder_mm_render).trigger("change"),t("#tmpcoder_mm_mobile_content").val(o.tmpcoder_mm_mobile_content).trigger("change"),""!==o.tmpcoder_mm_icon_picker?(t(".tmpcoder-mm-setting-icon div span").removeClass("tmpcoder-mm-active-icon"),t(".tmpcoder-mm-setting-icon div span:last-child").addClass("tmpcoder-mm-active-icon"),t(".tmpcoder-mm-setting-icon div span:last-child i").removeAttr("class"),t(".tmpcoder-mm-setting-icon div span:last-child i").addClass(o.tmpcoder_mm_icon_picker)):(t(".tmpcoder-mm-setting-icon div span").removeClass("tmpcoder-mm-active-icon"),t(".tmpcoder-mm-setting-icon div span:first-child").addClass("tmpcoder-mm-active-icon"),t(".tmpcoder-mm-setting-icon div span:last-child i").removeAttr("class"),t(".tmpcoder-mm-setting-icon div span:last-child i").addClass("fas fa-angle-down")),t("#tmpcoder_mm_icon_color").val(o.tmpcoder_mm_icon_color).trigger("keyup"),t("#tmpcoder_mm_icon_size").val(o.tmpcoder_mm_icon_size),t("#tmpcoder_mm_badge_text").val(o.tmpcoder_mm_badge_text),t("#tmpcoder_mm_badge_color").val(o.tmpcoder_mm_badge_color).trigger("keyup"),t("#tmpcoder_mm_badge_bg_color").val(o.tmpcoder_mm_badge_bg_color).trigger("keyup"),"true"==o.tmpcoder_mm_badge_animation?t("#tmpcoder_mm_badge_animation").prop("checked",!0):t("#tmpcoder_mm_badge_animation").prop("checked",!1)),"false"===t(".tmpcoder-mm-settings-wrap").attr("data-pro-active")&&(t("#tmpcoder_mm_render").val("default").trigger("change"),t("#tmpcoder_mm_mobile_content").val("mega").trigger("change"),""!==o.tmpcoder_mm_icon_picker&&(t(".tmpcoder-mm-setting-icon div span").removeClass("tmpcoder-mm-active-icon"),t(".tmpcoder-mm-setting-icon div span:first-child").addClass("tmpcoder-mm-active-icon"),t(".tmpcoder-mm-setting-icon div span:last-child i").removeAttr("class"),t(".tmpcoder-mm-setting-icon div span:last-child i").addClass("fas fa-angle-down")),t("#tmpcoder_mm_icon_color").val("").trigger("change"),t("#tmpcoder_mm_icon_size").val(""),t("#tmpcoder_mm_badge_text").val(""),t("#tmpcoder_mm_badge_color").val("#ffffff").trigger("keyup"),t("#tmpcoder_mm_badge_bg_color").val("#000000").trigger("keyup"),t("#tmpcoder_mm_badge_animation").prop("checked",!1))}};e.init()});